(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){e.exports=n(284)},111:function(e,t,n){},115:function(e,t,n){},284:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(15),s=n.n(l),r=(n(111),n(92)),i=n(56),c=n.n(i),u=n(93),m=n(94),g=n(95),d=n(104),p=n(96),h=n(105),f=(n(115),n(28)),w=n.n(f),E=n(38),b=n.n(E),k=n(39),v=n.n(k),y=n(57),N=n.n(y),I=n(100),L=n.n(I),O=n(101),S=n.n(O),C=n(36),G=n.n(C),T=n(29),j=n.n(T),A=n(55),R=n.n(A),x=n(25),U=n.n(x),q=n(97),P=n.n(q);function W(e){return o.a.createElement(P.a,Object.assign({button:!0,component:"a"},e))}var F=n(103),V=n.n(F),M=n(102),J=n.n(M),B=n(37),H=n(99),D={defaultPassword:"welcomemonk",topmonksLoginUrl:"https://insight.topmonks.com/login",googleClientId:"754652436928-aipe3i0i1uqdc9j7536krhp8lluuco15",googleSecret:"VhWj2x9Ufq4BWqRvqCxOcjdw",awsRegion:"eu-west-1",awsCognitoPoolId:"eu-west-1:489f06f7-8901-416e-ac06-c8f56e00d020",awsLambdaVersion:"2015-03-31"},K=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).responseGoogleOk=function(){var e=Object(u.a)(c.a.mark(function e(t){var a,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("response from google OK",t),a=t.getAuthResponse(),e.next=4,fetch(D.topmonksLoginUrl,{method:"POST",headers:{Accept:"application/json","Content-Type":"text/plain"},body:JSON.stringify({idToken:a.id_token})});case 4:o=e.sent,console.log("topmonksLoginResponse",o),n.setState({isLoggedIn:!0,user:t.profileObj,googleAccessToken:t.tokenObj}),n.configureAws();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.responseGoogleError=function(e){console.log("response from google ERROR",e)},n.logout=function(e){console.log("you have been logged out",e),n.setState({isLoggedIn:!1,user:null,googleAccessToken:null})},n.submit=function(){if(n.state.firstName&&n.state.lastName&&n.state.email&&n.state.phone&&H.validate(n.state.email))if(n.state.user&&n.state.googleAccessToken){new window.AWS.Lambda({region:D.awsRegion,apiVersion:D.awsLambdaVersion}).invoke({FunctionName:"create-google-account",InvocationType:"RequestResponse",LogType:"None"},function(e,t){e?(console.error("Error during Lambda invocation",e),alert(e)):(console.log("Registration to Google was successful"),JSON.parse(t.Payload))})}else alert("Missing token. Are you logged in?");else alert("Form is not valid")},n.state={isLoggedIn:!1,user:null,googleAccessToken:null,email:"",firstName:"",lastName:"",phone:"",isValid:!1},n.googleUrl=D.googleClientId+".apps.googleusercontent.com",n}return Object(h.a)(t,e),Object(g.a)(t,[{key:"configureAws",value:function(){window.AWS.config.update({region:D.awsRegion}),window.AWS.config.credentials=new window.AWS.CognitoIdentityCredentials({IdentityPoolId:D.awsCognitoPoolId})}},{key:"handleUserInput",value:function(e){var t=e.target.name,n=e.target.value;this.setState(Object(r.a)({},t,n))}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(L.a,{position:"static",color:"default"},o.a.createElement(S.a,{className:"space-between"},o.a.createElement(G.a,{variant:"h6",color:"inherit"},"Hello Monk"),this.state.isLoggedIn?o.a.createElement(B.GoogleLogout,{className:"float-right",buttonText:"Logout "+this.state.user.email,onLogoutSuccess:this.logout}):o.a.createElement(B.GoogleLogin,{className:"float-right",clientId:this.googleUrl,buttonText:"Login with Google (TopMonks domain)",onSuccess:this.responseGoogleOk,onFailure:this.responseGoogleError}))),this.state.isLoggedIn?o.a.createElement("div",{className:"content"},o.a.createElement("h2",null,"Fill your credentials and generate access to TopMonks accounts."),o.a.createElement("div",{className:"flex-row"},o.a.createElement(b.a,null,o.a.createElement(N.a,{title:"Access to following systems will be generated."}),o.a.createElement(v.a,null,o.a.createElement(R.a,{dense:!0},o.a.createElement(W,{href:"https://google.com/"},o.a.createElement(U.a,{primary:"Google"})),o.a.createElement(W,{href:"https://topmonks.1password.com/"},o.a.createElement(U.a,{primary:"1Password"})),o.a.createElement(W,{href:"https://topmonks.slack.com/"},o.a.createElement(U.a,{primary:"Slack"})),o.a.createElement(W,{href:"https://github.com/topmonks/"},o.a.createElement(U.a,{primary:"GitHub"})),o.a.createElement(W,{href:"https://topmonks.quip.com/"},o.a.createElement(U.a,{primary:"Quip"}))),o.a.createElement(J.a,null),o.a.createElement("div",null,"Default password ",o.a.createElement("i",null,D.defaultPassword)," will be used"))),o.a.createElement(b.a,null,o.a.createElement(v.a,null,o.a.createElement(w.a,{className:"root",elevation:1},o.a.createElement("form",{onSubmit:this.submit,noValidate:!0,className:"flex-column"},o.a.createElement(j.a,{name:"firstName",label:"First Name",value:this.state.firstName,onChange:function(t){return e.handleUserInput(t)},required:!0}),o.a.createElement(j.a,{name:"lastName",label:"Last Name",value:this.state.lastName,onChange:function(t){return e.handleUserInput(t)},required:!0}),o.a.createElement(j.a,{name:"phone",label:"Phone",type:"tel",value:this.state.phone,onChange:function(t){return e.handleUserInput(t)},required:!0}),o.a.createElement(j.a,{name:"email",label:"Email",value:this.state.email,type:"email",autoComplete:"email",onChange:function(t){return e.handleUserInput(t)},required:!0}),o.a.createElement(V.a,{type:"button",color:"primary",onClick:this.submit},"Generate accounts"))))))):o.a.createElement("div",{className:"content"},o.a.createElement(b.a,null,o.a.createElement(N.a,{title:"You have to be logged in"}),o.a.createElement(v.a,null,o.a.createElement(B.GoogleLogin,{className:"float-right",clientId:this.googleUrl,buttonText:"Login with Google (TopMonks domain)",onSuccess:this.responseGoogleOk,onFailure:this.responseGoogleError})))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[106,2,1]]]);
//# sourceMappingURL=main.c94c0015.chunk.js.map