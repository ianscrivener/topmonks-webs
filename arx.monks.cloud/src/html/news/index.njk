{% extends "layouts/arx.njk" %}
{% from "common/helpers.njk" import image %}

{% block links %}
  <link rel="stylesheet" href="/assets/css/news.css">
  <style>
    @media (min-width: 839px) and (max-width: 1023px) {
      .intro__box {
        padding: 4em;
      }
    }

    @media (max-width: 739px) {
      img {
        width: 100%;
        height: 200px;
        object-fit: cover;
      }

      .intro__format {
        display: block;
      }
    }
    @media (min-width: 740px) {
      .intro__contact-img {
        display: none;
      }
    }

    @media (min-width: 740px) and (max-width: 839px) {
      .intro {
        align-self: center;
        background-image: url({{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=860) }});
        background-size: 60% auto;
        background-position: top right;
        background-repeat: no-repeat;
        min-height: 300px;
      }
    }

    @media (min-width: 839px) and (max-width: 1439px) {
      .intro {
        align-self: center;
        background-image: url({{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=860) }});
        background-size: 75% auto;
        background-position: top right;
        background-repeat: no-repeat;
        min-height: 400px;
      }
    }
    @media (min-width: 1440px) and (max-width: 1839px) {
      .intro {
        align-self: center;
        background-image: url({{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=860) }});
        background-size: 60% auto;
        background-position: top right;
        background-repeat: no-repeat;
        min-height: 440px;
      }
    }
    @media (min-width: 1840px) and (max-width: 2239px){
      .intro {
        align-self: center;
        background-image: url({{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=860) }});
        background-size: 55% auto;
        background-position: top right;
        background-repeat: no-repeat;
        min-height: 600px;
      }
    }
    @media (min-width: 2240px) {
      .intro {
        align-self: center;
        background-image: url({{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=860) }});
        background-size: 55% auto;
        background-position: top right;
        background-repeat: no-repeat;
        min-height: 700px;
      }
    }
  </style>
{% endblock %}

{% block main %}
  <section class="intro">
    <div class="mdc-layout-grid layout-arx">
      <div class="intro__format mdc-layout-grid__inner">
        <div class="intro__box box--white mdc-layout-grid__cell">
          <p>News</p>
        </div>
        <picture class="intro__contact-img mdc-layout-grid__cell mdc-layout-grid__cell--span-8-tablet">
          <source media="screen and (max-width: 399px)"
                  srcset="{{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=400) }} 1x,
                      {{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=400) }} 1.5x,
                      {{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=400) }} 2x">
          <source media="screen and (min-width: 400px) and (max-width: 599px)"
                  srcset="{{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=420) }} 1x,
                {{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=600) }} 1.5x,
                {{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=600) }} 2x">
          <source media="screen and (min-width: 840px)"
                  srcset="{{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=860) }} 1x,
                {{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=860) }} 1.5x,
                {{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl(width=860) }} 2x">
          <img alt="Fotografie PostCube u domu" loading="lazy"
               src="{{ "/arx.monks.cloud/news-header.jpg" | cloudinaryUrl }}" width="860" height="574">
        </picture>
      </div>
    </div>
  </section>

  <section>
    <div class="mdc-layout-grid layout-arx">
      <div class="mdc-layout-grid__inner">
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
          <h2>News About ARX</h2>
        </div>
      </div>
    </div>
  </section>
  <section class="news_page">
    <div class="mdc-layout-grid layout-arx">
      <div class="mdc-layout-grid__inner">

        {% for article in news | reverse %}
          <article
            class="mdc-layout-grid__cell mdc-layout-grid__cell--span-6-desktop">
            {{ image(article.image, images, alt="", width=660, height=270, tabletWidth=380, phoneWidth=440) }}
            <h3><a href="/news/{{ article.date | replace("T00:00:00.000Z", "") }}/">{{ article.title }}</a></h3>
            <p>
              <time
                datetime="{{ article.date }}">{{ article.date | replace("-", "/") | replace("T00:00:00.000Z", "") }}</time>
            </p>
            {{ article.perex | safe }}
          </article>
        {% endfor %}
      </div>
    </div>
  </section>


  <section>
    <div class="mdc-layout-grid layout-arx">
      <div class="mdc-layout-grid__inner">
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
          <div class="button text-center">
            <a class="button__info" href="/news/">LOAD MORE</a>
          </div>
        </div>
      </div>
    </div>
  </section>
{% endblock %}
