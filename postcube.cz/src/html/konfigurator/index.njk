{% extends 'layouts/main.njk' %}
{% set language = cs %}

{% block title %}
  PostCube - Konfigurátor
{% endblock %}
{% block head %}
  <meta name="description" content="Chytrá schránka PostCube pro vyzvedávání zásilek kdykoliv.">
  <link rel="canonical" href="https://postcube.cz/">
  <meta property="og:type" content="company">
  <meta property="og:url" content="https://www.postcube.cz/">
  <meta property="og:site_name" content="postcube.cz">

  <style>
    .main-info h1 {
      font-size: 2rem;
    }
    form h2 {
      font-size: 1.2rem;
      margin-top: 24px;
      margin-bottom: 0;
      color: #707070;
    }

    .select-container {
      display: flex;
      flex-wrap: wrap;
    }

    .select-dropdown {
      flex: 1;
      height: 48px;
      border-radius: 0;
      border: solid 1px #A5A5A5;
      font-size: 1rem;
      padding-left: 16px;
    }

    .main-info__radio-container {
      position: relative;
      flex: 1;
    }

    .input-radio {
      position: absolute;
      opacity: 0;
      cursor: pointer;
    }

    .input-radio--custom {
      display: flex;
      align-items: center;
      justify-content: center;
      border: solid 1px #A5A5A5;
      flex: 1;
      background-color: #1538E5;
      height: 48px;
    }

    .main-info__radio-container .input-radio ~ .input-radio--custom {
      background-color: white;
      color: black;
      font-weight: bold;
    }

    .main-info__radio-container:hover .input-radio ~ .input-radio--custom {
      background-color: white;
      color: black;
    }

    .main-info__radio-container .input-radio:checked ~ .input-radio--custom {
      background-color: #1538E5;
      color: white;
    }
  </style>

{% endblock %}

{% block content %}
  <section id="main-info" class="main-info">
    <form id="configuration-form">
      <div class="mdc-layout-grid">
        <div class="mdc-layout-grid__inner layout-wrapper">
          <div class="main-info__content mdc-layout-grid__cell mdc-layout-grid__cell--span-6">
            <h1>Objednejte si box podle vašich představ</h1>
            <h2>Velikost boxu</h2>

            <div class="select-container">
              {% for item in configurator.sizes %}
                <label class="main-info__radio-container">
                  <input type="radio" class="input-radio" name="size" value="{{ item.value }}"/>
                  <div class="input-radio--custom">{{ item.label }}</div>
                </label>
              {% endfor %}
            </div>

            <h2>Barva</h2>
            <div class="select-container">
              <select name="color" class="select-dropdown">
                {% for item in configurator.colors %}
                  <option value="{{ item.value }}">
                    {{ item.label }}
                  </option>
                {% endfor %}
              </select>
            </div>

            {% for item in configurator.accessories %}
              <h2>{{ item.name }}</h2>
              <div class="select-container">
                {% for option in item.options %}
                  <label class="main-info__radio-container">
                    <input type="radio" class="input-radio" name="{{ item.name }}" value="{{ option.value }}"/>
                    <div class="input-radio--custom">{{ option.label }}</div>
                  </label>
                {% endfor %}
              </div>
            {% endfor %}
          </div>
          <div class="main-info__bg mdc-layout-grid__cell mdc-layout-grid__cell--span-6">
            {# tbd, order overview ~ product list, prices and total price #}
            <button type="submit">Pokračovat</button>
          </div>
        </div>
      </div>
      <script>
        const form = document.getElementById('configuration-form');

        form.addEventListener('change', (event) => {
          const name = event.target.name;
          const value = event.target.value;
          console.log(name + " changed to " + value);
          // tbd, 1. update order preview (product list and prices)
        });

        form.addEventListener('submit', event => {
          event.preventDefault();
          // tbd, 1. serilize form
          // tbd, 2. validate
          // tbd, 3. generate product code based on selected options
          // tbd, 4. using https://gist.github.com/junkycoder/a98c8e2c9c4804b6e2209acaf3c5fea7
          // tbd, 5. redirect to url like https://chytrybox.myshoptet.com/?c=NDYvU0VEKzU4LzMwKzYxKzY0
        });
      </script>
    </form>
  </section>
{% endblock %}